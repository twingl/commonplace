<!-- Header -->
<div class="header">
  <div class="header__menubar  cf">
    <div class="header__nav header-logo">
      <a href="/" class="header-logo__img">Twingl</a>
    </div>
    <div class="header__nav header__search">
      <div class="header__search__box">
        <form ng-submit="search(searchTerm)">
            <input type="search" class="search-box__input" ng-model="searchTerm" tabindex=1 placeholder="Search..." autofocus>
        </form>
      </div>
    </div>
    <div class="header__nav header__sign-out">
      <a href="" ng-click="signOut()"><i class="fa fa-sign-out"></i> Sign Out</a>
    </div>
  </div>

  <!-- Navigation -->
  <div class="navigation-container">
    <div class="navigation-contents">
      <i class="fa  fa-chevron-circle-left  navigation__chevron--left" ng-click="flickBackOnePage()"></i>
      <h2>{{timeSlice.beginning | date:'EEEE'}} ({{timeSlice.beginning | date:'MMMM, d'}})</h2>
      <i class="fa  fa-chevron-circle-right  navigation__chevron--right" ng-click="flickForwardOnePage()"></i>
    </div>
  </div>
</div>

  <!-- Search -->
  <div class="search" ng-show="showSearchResults">
    <div class="search-header">
      <div class="search--hide"><i class="icon-remove icon-2x" ng-click="showSearchResults = false; searchTerm = ''"></i></div>
      <h1 class="search__title">Search Results</h1>
    </div>
    <div class="search-results--notice" ng-show="showSearchNotice">
        <h3>... There were no results matching your search term.</h3>
    </div>
    <div class="search-results__list" masonry='{ transitionDuration: "0" }'>
      <div class="card card--min masonry-brick" ng-repeat="result in searchResults">
        <a href="/#/highlights/{{result.id}}" class="card__quote__link"><div class="card__quote card__quote--min">{{result.quote}}</div></a>
        <div class="card__attribution card__attribution--min">&mdash; <a href="{{result.context_url}}">{{result.context_url | ShortenedURL}}</a></div>
        <div class="card__comment card__comment--min" ng-repeat="comment in result.comments">{{comment.body}} <hr></div>
        <div class="card__actions card__actions--min">
          <div class="card__actions__left">
            <a href="/#/{{formatDate(result.created)}}" class="remove-underline"><i class="icon-reply-all card--jump"></i></a>
            <span class="card__label">Jump to this Date</span>
          </div>
          <div class="card__actions__right  card__actions__right__min">
            <div class="card__connect--swing" ng-class="{ 'animated swing': twinglingAnimate(result.id, $index) }">
              <i class="icon-bolt card__connect" ng-class="{ 'card__connect--swing__start' : twinglingStart(result.id, $index), 'card__connect--swing__end' : twinglingEnd(result.id, $index) }" ng-click="newTwingling('results', result.id, $index)"></i>
              <sup class="superscript--small">{{twinglingCount(result.twinglings.length)}}</sup>
            </div>
            &nbsp;<span class="card__label">Add Link</span>
          </div>
        </div>
      </div>
    </div>
  </div>

<div class="header-background"></div>


<!-- Highlight Cards -->
<div class="card-container">
  <div class="card" ng-repeat="highlight in highlights | filter:inTimeSlice | orderBy:'-created'">

    <!-- The Highlight's Quote -->
     <div class="card-quote-container">
      <div class="card__delete  remove-icon">
        <i class="fa  fa-times-circle" ng-click="deleteObject('highlight', highlight.id, $index)" title="Delete Highlight"></i>
      </div>
      <blockquote class="primary__quote">
        <p>
          <a href="/#/highlights/{{highlight.id}}">{{highlight.quote}}</a>
        </p>
        <span class="source">from <a href="{{highlight.context_url}}" target="_blank">{{highlight.context_url | ShortenedURL}}</a></span>
      </blockquote>
      </div>
      
      <!-- The Card's Feed -->
      <div class="card-feed-container">
        <div class="timeline-group">
          <div class="timeline-entry  cf" ng-repeat="object in highlight.card_feed">
            <div class="timeline-entry__metadata">
              <i class="fa" ng:class="{true:'fa-comment-o',false:'fa-link'}[object.type=='comment']"></i>
            </div>
            <div class="timeline-entry__body">
              {{object.body}}
            </div>
            <div class="timeline-entry__delete  remove-icon">
              <i class="fa  fa-times" ng-click="deleteObject('comment', comment.id, $parent.$index, $index)" title="Remove Item"></i>
            </div>
          </div>
        </div>
      </div>

      <!-- Add Comment, Add Link -->
      <div class="card-actions-container">
        <div class="card-actions" ng-hide="highlight.hideCardActions">
          <button ng-click="highlight.showNewCommentSection = true; highlight.hideCardActions = true;">Add Comment</button>
          <div style="display: inline-block" ng-controller="LinkController">
            <button ng-click="stageResource('highlight', highlight.id, highlight)">Add Link</button>
          </div>
        </div>

        <!-- Create Comment Module -->
        <div class="new-comment" ng-show="highlight.showNewCommentSection">
          <textarea class="new-comment__body" ng-model="comment.text" placeholder="Your comment..." tabindex=2></textarea>
          <button class="new-comment__submit" ng-click="addComment($index, highlight.id, comment.text)" tabindex=3>Save Comment</button><button class="new-comment__cancel" ng-click="highlight.showNewCommentSection = false; highlight.hideCardActions = false" tabindex=4>Cancel</button>
        </div>
      </div>

  </div>

  <div class="link_ui {{uiStatus()}}" ng-show="showInterface()" ng-controller="LinkController">
    <div class="link_ui__orb" ng-disabled="!enableCommit()" ng-click="commitLink()"></div>
    <div class="link_ui__corona"></div>
    <div class="link_ui__card link_ui__origin" ng-show="origin()">
      <i class="unstage  fa  fa-minus-square" ng-click="clearOrigin()" title="Remove this quote"></i>
      <p class="quote">{{origin().quote}}</p>
    </div>
    <div class="link_ui__card link_ui__termination" ng-show="termination()">
      <i class="unstage  fa  fa-minus-square" ng-click="clearTermination()" title="Remove this quote"></i>
      <p class="quote">{{termination().quote}}</p>
    </div>
  </div>

  <div class="link_ui__occlusion_fix" ng-show="showInterface()" ng-controller="LinkController"></div>

</div>
